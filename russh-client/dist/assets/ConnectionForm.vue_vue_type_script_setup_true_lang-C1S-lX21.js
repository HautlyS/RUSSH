import{d as H,_ as O,k as y,c as S,w as P,B as r,N as v,E as t,J as u,Q as c,K as p,O as a,P as d,$ as D,G as g,H as x,F as k,a0 as U,I as L,D as j,L as z,a1 as h,a2 as E,e as i}from"./vue-vendor-CW4dY-Mk.js";import{u as I}from"./index-C_UVHTrk.js";import{c as N,F as J,J as G,N as Q,O as W}from"./ui-vendor-BiLQkvZj.js";const X={class:"text-lg font-medium mb-4 flex items-center gap-2"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"md:col-span-2"},_={key:0,class:"flex gap-2"},ee=["value"],te={key:1,class:"flex gap-2"},oe=["onKeydown"],se={class:"flex gap-2"},le=["onClick"],ne={class:"md:col-span-2"},ae={class:"flex flex-wrap gap-2 mb-2"},re=["onClick"],ie={class:"flex gap-2"},de=["onKeydown"],ue={class:"text-lg font-medium mb-4 flex items-center gap-2"},pe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},me={class:"md:col-span-2"},ce={class:"text-lg font-medium mb-4 flex items-center gap-2"},be={class:"space-y-4"},fe={class:"flex gap-4"},ye={class:"flex items-center gap-2 cursor-pointer"},ve={class:"flex items-center gap-2 cursor-pointer"},ge={class:"flex items-center gap-2 cursor-pointer"},xe={key:0},ke={class:"flex gap-2"},he={type:"button",class:"btn-secondary"},Ce={class:"flex items-center gap-2 cursor-pointer"},we={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},Te=["disabled"],Ne=H({__name:"ConnectionForm",props:{profile:{},mode:{}},emits:["submit","cancel"],setup(C,{emit:F}){const n=C,K=F,R=I(),o=O({name:n.profile?.name||"",host:n.profile?.host||"",port:n.profile?.port||22,username:n.profile?.username||"",authType:n.profile?.authType||"password",keyPath:n.profile?.keyPath||"",folder:n.profile?.folder||"",color:n.profile?.color||"",tags:n.profile?.tags||[],autoReconnect:n.profile?.autoReconnect??!0}),b=y(""),m=y(""),f=y(!1),M=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],$=S(()=>R.folders),w=S(()=>o.name.trim()&&o.host.trim()&&o.username.trim()&&o.port>=1&&o.port<=65535&&(o.authType!=="key"||o.keyPath.trim()));function T(){const l=b.value.trim();l&&!o.tags.includes(l)&&(o.tags.push(l),b.value="")}function A(l){o.tags=o.tags.filter(e=>e!==l)}function V(){m.value.trim()&&(o.folder=m.value.trim(),f.value=!1,m.value="")}function B(){w.value&&K("submit",{id:n.profile?.id,name:o.name.trim(),host:o.host.trim(),port:o.port,username:o.username.trim(),authType:o.authType,keyPath:o.keyPath||void 0,folder:o.folder||void 0,color:o.color||void 0,tags:o.tags,autoReconnect:o.autoReconnect,lastConnected:n.profile?.lastConnected})}return P(()=>n.profile,l=>{l&&Object.assign(o,{name:l.name,host:l.host,port:l.port,username:l.username,authType:l.authType,keyPath:l.keyPath||"",folder:l.folder||"",color:l.color||"",tags:[...l.tags],autoReconnect:l.autoReconnect})},{immediate:!0}),(l,e)=>(i(),r("form",{onSubmit:v(B,["prevent"]),class:"space-y-6"},[t("section",null,[t("h3",X,[u(p(N),{class:"w-5 h-5"}),e[15]||(e[15]=c(" Basic Information ",-1))]),t("div",Y,[t("div",Z,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-1"},"Connection Name *",-1)),a(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),type:"text",required:"",placeholder:"My Server",class:"input"},null,512),[[d,o.name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium mb-1"},"Folder",-1)),f.value?(i(),r("div",te,[a(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s),type:"text",placeholder:"New folder name",class:"input flex-1",onKeydown:U(v(V,["prevent"]),["enter"])},null,40,oe),[[d,m.value]]),t("button",{type:"button",onClick:V,class:"btn-primary"},"Add"),t("button",{type:"button",onClick:e[4]||(e[4]=s=>f.value=!1),class:"btn-secondary"},"Cancel")])):(i(),r("div",_,[a(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.folder=s),class:"input flex-1"},[e[17]||(e[17]=t("option",{value:""},"No folder",-1)),(i(!0),r(g,null,x($.value,s=>(i(),r("option",{key:s,value:s},k(s),9,ee))),128))],512),[[D,o.folder]]),t("button",{type:"button",onClick:e[2]||(e[2]=s=>f.value=!0),class:"btn-secondary"},[u(p(J),{class:"w-4 h-4"})])]))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-1"},"Color",-1)),t("div",se,[(i(),r(g,null,x(M,s=>t("button",{key:s,type:"button",onClick:q=>o.color=o.color===s?"":s,class:j(["w-8 h-8 rounded-full border-2 transition-transform hover:scale-110",o.color===s?"border-gray-900 dark:border-white scale-110":"border-transparent"]),style:L({backgroundColor:s})},null,14,le)),64))])]),t("div",ne,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-1"},"Tags",-1)),t("div",ae,[(i(!0),r(g,null,x(o.tags,s=>(i(),r("span",{key:s,class:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-sm"},[c(k(s)+" ",1),t("button",{type:"button",onClick:q=>A(s),class:"hover:text-red-500"},"Ã—",8,re)]))),128))]),t("div",ie,[a(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>b.value=s),type:"text",placeholder:"Add tag...",class:"input flex-1",onKeydown:U(v(T,["prevent"]),["enter"])},null,40,de),[[d,b.value]]),t("button",{type:"button",onClick:T,class:"btn-secondary"},[u(p(G),{class:"w-4 h-4"})])])])])]),t("section",null,[t("h3",ue,[u(p(N),{class:"w-5 h-5"}),e[21]||(e[21]=c(" Connection ",-1))]),t("div",pe,[t("div",me,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-1"},"Host *",-1)),a(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.host=s),type:"text",required:"",placeholder:"example.com or 192.168.1.1",class:"input"},null,512),[[d,o.host]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium mb-1"},"Port *",-1)),a(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.port=s),type:"number",required:"",min:"1",max:"65535",class:"input"},null,512),[[d,o.port,void 0,{number:!0}]])])])]),t("section",null,[t("h3",ce,[u(p(Q),{class:"w-5 h-5"}),e[24]||(e[24]=c(" Authentication ",-1))]),t("div",be,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium mb-1"},"Username *",-1)),a(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.username=s),type:"text",required:"",placeholder:"root",class:"input"},null,512),[[d,o.username]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium mb-2"},"Authentication Method",-1)),t("div",fe,[t("label",ye,[a(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.authType=s),type:"radio",value:"password",class:"w-4 h-4 text-blue-500"},null,512),[[h,o.authType]]),e[26]||(e[26]=t("span",null,"Password",-1))]),t("label",ve,[a(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.authType=s),type:"radio",value:"key",class:"w-4 h-4 text-blue-500"},null,512),[[h,o.authType]]),e[27]||(e[27]=t("span",null,"SSH Key",-1))]),t("label",ge,[a(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.authType=s),type:"radio",value:"agent",class:"w-4 h-4 text-blue-500"},null,512),[[h,o.authType]]),e[28]||(e[28]=t("span",null,"SSH Agent",-1))])])]),o.authType==="key"?(i(),r("div",xe,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-1"},"Private Key Path *",-1)),t("div",ke,[a(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.keyPath=s),type:"text",placeholder:"~/.ssh/id_rsa",class:"input flex-1"},null,512),[[d,o.keyPath]]),t("button",he,[u(p(W),{class:"w-4 h-4"}),e[30]||(e[30]=c(" Browse ",-1))])])])):z("",!0)])]),t("section",null,[e[33]||(e[33]=t("h3",{class:"text-lg font-medium mb-4"},"Options",-1)),t("label",Ce,[a(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.autoReconnect=s),type:"checkbox",class:"w-4 h-4 text-blue-500 rounded"},null,512),[[E,o.autoReconnect]]),e[32]||(e[32]=t("span",null,"Auto-reconnect on disconnect",-1))])]),t("div",we,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>l.$emit("cancel")),class:"btn-secondary"}," Cancel "),t("button",{type:"submit",disabled:!w.value,class:"btn-primary"},k(C.mode==="create"?"Create Connection":"Save Changes"),9,Te)])],32))}});export{Ne as _};
