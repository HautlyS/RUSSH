import{d as k,k as f,c as C,B as r,E as e,D as I,b as d,K as s,L as h,F as b,e as t,g as R,G as V,H as z,J as x,N as M,o as E,O as j,P as F,y as G,Q as U,f as W}from"./vue-vendor-CW4dY-Mk.js";import{k as L,a as H}from"./index-C_UVHTrk.js";import{W as A,a as J,ab as O,R as Q,an as P,ao as K,ap as X,aq as Y,X as Z,r as ee,ar as te,as as se,at as D,a9 as N,au as ne}from"./ui-vendor-BiLQkvZj.js";import{L as ae}from"./Lightning-Dhf60LA_.js";import{_ as oe}from"./ElectricBorder.vue_vue_type_script_setup_true_lang-0Iz-STlh.js";import{_ as re}from"./RotatingText.vue_vue_type_script_setup_true_lang-H8MKJONa.js";import"@tauri-apps/api/core";import"./animation-vendor-BhxYwKto.js";const ie={class:"p2p-status p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},le={class:"flex items-center gap-3"},ce={class:"flex-1"},de={class:"flex items-center gap-2"},ue={class:"font-medium text-gray-900 dark:text-white"},ge={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ye={key:0,class:"flex items-center gap-2 mt-1"},pe={class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},xe=["title"],be=k({__name:"P2PStatus",props:{isOnline:{type:Boolean},nodeId:{},peerCount:{}},setup(n){const a=n,i=f(!1);async function l(){a.nodeId&&(await navigator.clipboard.writeText(a.nodeId),i.value=!0,setTimeout(()=>i.value=!1,2e3))}const u=C(()=>a.nodeId?`${a.nodeId.slice(0,8)}...${a.nodeId.slice(-8)}`:"");return(g,o)=>(t(),r("div",ie,[e("div",le,[e("div",{class:I(["p-2 rounded-full",n.isOnline?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"])},[n.isOnline?(t(),d(s(A),{key:0,class:"w-5 h-5 text-green-600 dark:text-green-400"})):(t(),d(s(J),{key:1,class:"w-5 h-5 text-gray-400"}))],2),e("div",ce,[e("div",de,[e("span",ue,b(n.isOnline?"Online":"Offline"),1),n.peerCount?(t(),r("span",ge," ("+b(n.peerCount)+" peer"+b(n.peerCount!==1?"s":"")+") ",1)):h("",!0)]),n.nodeId?(t(),r("div",ye,[e("code",pe,b(u.value),1),e("button",{onClick:l,class:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:i.value?"Copied!":"Copy Node ID"},[i.value?(t(),d(s(O),{key:0,class:"w-3.5 h-3.5 text-green-500"})):(t(),d(s(Q),{key:1,class:"w-3.5 h-3.5 text-gray-400"}))],8,xe)])):h("",!0)])])]))}}),he=["title"],me={class:"text-xs"},fe={key:0,class:"text-gray-600 dark:text-gray-400"},ve={key:1,class:"ml-1 px-1.5 py-0.5 rounded text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700"},ke=k({__name:"ConnectionQuality",props:{latency:{},connectionType:{}},setup(n){const a=n,i=C(()=>a.latency?a.latency<50?"excellent":a.latency<150?"good":a.latency<300?"fair":"poor":"unknown"),l=C(()=>{switch(i.value){case"excellent":return{icon:Y,color:"text-green-500",label:"Excellent"};case"good":return{icon:X,color:"text-green-400",label:"Good"};case"fair":return{icon:K,color:"text-yellow-500",label:"Fair"};case"poor":return{icon:P,color:"text-red-500",label:"Poor"};default:return{icon:P,color:"text-gray-400",label:"Unknown"}}});return(u,g)=>(t(),r("div",{class:"connection-quality flex items-center gap-2",title:`${l.value.label}${n.latency?` (${n.latency}ms)`:""}`},[(t(),d(R(l.value.icon),{class:I(["w-4 h-4",l.value.color])},null,8,["class"])),e("div",me,[n.latency?(t(),r("span",fe,b(n.latency)+"ms",1)):h("",!0),n.connectionType?(t(),r("span",ve,b(n.connectionType),1)):h("",!0)])],8,he))}}),_e={class:"peer-list"},we={key:0,class:"p-4 text-center text-gray-500 dark:text-gray-400"},$e=["onClick"],Ce={class:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},Ie={class:"flex-1 min-w-0"},Te={class:"font-medium text-gray-900 dark:text-white truncate"},Pe={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},De=["onClick"],Ne=k({__name:"PeerList",props:{peers:{}},emits:["disconnect","select"],setup(n,{emit:a}){const i=a;function l(u){switch(u){case"mobile":return se;case"tablet":return te;default:return ee}}return(u,g)=>(t(),r("div",_e,[n.peers.length===0?(t(),r("div",we,[...g[0]||(g[0]=[e("p",null,"No connected peers",-1),e("p",{class:"text-sm mt-1"},"Share your Node ID or scan a QR code to connect",-1)])])):h("",!0),(t(!0),r(V,null,z(n.peers,o=>(t(),r("div",{key:o.id,class:"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-0",onClick:y=>i("select",o)},[e("div",Ce,[(t(),d(R(l(o.deviceType)),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"}))]),e("div",Ie,[e("div",Te,b(o.name||"Unknown Device"),1),e("div",Pe,b(o.id.slice(0,16))+"... ",1)]),x(ke,{latency:o.latency,"connection-type":o.connectionType},null,8,["latency","connection-type"]),e("button",{onClick:M(y=>i("disconnect",o.id),["stop"]),class:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 hover:text-red-500 transition-colors",title:"Disconnect"},[x(s(Z),{class:"w-4 h-4"})],8,De)],8,$e))),128))]))}}),Se={class:"qr-code-share p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Re={class:"flex items-center gap-2 mb-4"},Ee={class:"flex justify-center mb-4"},Le={class:"relative p-4 bg-white rounded-lg"},Oe=["src"],Qe={key:1,class:"w-48 h-48 flex items-center justify-center bg-gray-100 rounded"},qe={class:"mb-4"},Be={class:"flex items-center gap-2"},Ve={class:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-900 rounded text-xs font-mono truncate"},ze=["title"],Me={class:"flex gap-2"},je=["disabled"],S=k({__name:"QRCodeShare",setup(n){const{nodeInfo:a,generateQRCode:i,connectToPeer:l}=L(),u=f(""),g=f(!1),o=f(!1),y=f("");async function _(){g.value=!0;try{u.value=await i()}finally{g.value=!1}}async function w(){a.value?.nodeId&&(await navigator.clipboard.writeText(a.value.nodeId),o.value=!0,setTimeout(()=>o.value=!1,2e3))}async function m(){y.value.trim()&&(await l(y.value.trim()),y.value="")}return E(_),(T,c)=>(t(),r("div",Se,[e("div",Re,[x(s(D),{class:"w-5 h-5 text-blue-500"}),c[1]||(c[1]=e("h3",{class:"font-medium text-gray-900 dark:text-white"},"Share Connection",-1))]),e("div",Ee,[e("div",Le,[u.value?(t(),r("img",{key:0,src:u.value,alt:"QR Code",class:"w-48 h-48"},null,8,Oe)):(t(),r("div",Qe,[g.value?(t(),d(s(N),{key:0,class:"w-8 h-8 text-gray-400 animate-spin"})):(t(),d(s(D),{key:1,class:"w-8 h-8 text-gray-400"}))])),e("button",{onClick:_,class:"absolute top-2 right-2 p-1 bg-white rounded shadow hover:bg-gray-100",title:"Regenerate QR Code"},[x(s(N),{class:I(["w-4 h-4 text-gray-500",{"animate-spin":g.value}])},null,8,["class"])])])]),e("div",qe,[c[2]||(c[2]=e("label",{class:"block text-sm text-gray-500 dark:text-gray-400 mb-1"},"Your Node ID",-1)),e("div",Be,[e("code",Ve,b(s(a)?.nodeId||"Loading..."),1),e("button",{onClick:w,class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:o.value?"Copied!":"Copy"},[o.value?(t(),d(s(O),{key:0,class:"w-4 h-4 text-green-500"})):(t(),d(s(Q),{key:1,class:"w-4 h-4 text-gray-500"}))],8,ze)])]),e("div",null,[c[3]||(c[3]=e("label",{class:"block text-sm text-gray-500 dark:text-gray-400 mb-1"},"Connect to Peer",-1)),e("div",Me,[j(e("input",{"onUpdate:modelValue":c[0]||(c[0]=$=>y.value=$),type:"text",placeholder:"Enter peer Node ID",class:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-sm"},null,512),[[F,y.value]]),e("button",{onClick:m,disabled:!y.value.trim(),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg text-sm font-medium transition-colors"}," Connect ",8,je)])])]))}}),Fe={class:"p2p-view h-full flex flex-col relative"},Ge={key:0,class:"absolute inset-0 z-0 opacity-20"},Ue={class:"relative z-10 px-6 py-4 border-b border-gray-200 dark:border-gray-700"},We={class:"flex items-center justify-between"},He={class:"relative z-10 flex-1 overflow-auto p-6"},Ae={class:"max-w-4xl mx-auto grid gap-6 lg:grid-cols-2"},Je={class:"space-y-6"},Ke={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Xe={key:0,class:"mt-6 text-center"},Ye={class:"text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2"},lt=k({__name:"P2PView",setup(n){const a=G(),{nodeInfo:i,peers:l,isOnline:u,initialize:g,disconnectPeer:o}=L(),{isLightningEnabledFor:y,isElectricBorderEnabled:_,isRotatingTextEnabled:w,visualEffects:m}=H(),T=y("p2p"),c=f(null),$=["Share your QR code to connect","Direct connections are faster","NAT traversal enabled","Encrypted peer-to-peer"];E(()=>{g()});function q(v){c.value=v}function B(v){o(v),c.value?.id===v&&(c.value=null)}return(v,p)=>(t(),r("div",Fe,[s(T)?(t(),r("div",Ge,[x(ae,{hue:280,intensity:s(m).lightning.intensity,speed:s(m).lightning.speed,size:1},null,8,["intensity","speed"])])):h("",!0),e("header",Ue,[e("div",We,[p[2]||(p[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"P2P Network"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Connect directly with other devices using peer-to-peer networking ")],-1)),e("button",{onClick:p[0]||(p[0]=Ze=>s(a).push("/p2p/terminal")),class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-medium transition-all shadow-lg hover:shadow-xl"},[x(s(ne),{class:"w-5 h-5"}),p[1]||(p[1]=U(" Open Terminal ",-1))])])]),e("div",He,[e("div",Ae,[e("div",Je,[x(be,{"is-online":s(u),"node-id":s(i)?.nodeId,"peer-count":s(l).length},null,8,["is-online","node-id","peer-count"]),s(_)?(t(),d(oe,{key:0,color:"#7df9ff",speed:1.2,chaos:.5,thickness:2,style:{borderRadius:"12px"}},{default:W(()=>[x(S)]),_:1})):(t(),d(S,{key:1}))]),e("div",Ke,[p[3]||(p[3]=e("div",{class:"px-4 py-3 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"font-semibold text-gray-900 dark:text-white"},"Connected Peers")],-1)),x(Ne,{peers:s(l),onSelect:q,onDisconnect:B},null,8,["peers"])])]),s(w)?(t(),r("div",Xe,[e("p",Ye,[p[4]||(p[4]=e("span",null,"ðŸ’¡",-1)),x(re,{texts:$,"rotation-interval":s(m).rotatingText.rotationInterval,"stagger-duration":s(m).rotatingText.staggerDuration,"main-class-name":"text-gray-500 dark:text-gray-400",transition:{type:"spring",damping:30,stiffness:400}},null,8,["rotation-interval","stagger-duration"])])])):h("",!0)])]))}});export{lt as default};
